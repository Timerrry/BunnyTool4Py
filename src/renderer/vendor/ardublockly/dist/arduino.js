!function(l,o){for(var e in o)l[e]=o[e]}(window,function(l){var o={};function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return l[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=l,e.c=o,e.d=function(l,o,n){e.o(l,o)||Object.defineProperty(l,o,{enumerable:!0,get:n})},e.r=function(l){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},e.t=function(l,o){if(1&o&&(l=e(l)),8&o)return l;if(4&o&&"object"==typeof l&&l&&l.__esModule)return l;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:l}),2&o&&"string"!=typeof l)for(var i in l)e.d(n,i,function(o){return l[o]}.bind(null,i));return n},e.n=function(l){var o=l&&l.__esModule?function(){return l.default}:function(){return l};return e.d(o,"a",o),o},e.o=function(l,o){return Object.prototype.hasOwnProperty.call(l,o)},e.p="",e(e.s=0)}([function(l,o,e){e(1),e(2),e(3)},function(l,o,e){"use strict";Blockly.Msg.ARD_ANALOGREAD="读取模拟引脚",Blockly.Msg.ARD_ANALOGREAD_TIP="返回0到1024之间的值",Blockly.Msg.ARD_ANALOGWRITE="设置模拟引脚",Blockly.Msg.ARD_ANALOGWRITE_TIP="将0到255之间的模拟值写入特定的PWM端口",Blockly.Msg.ARD_BUILTIN_LED="设置板载LED",Blockly.Msg.ARD_BUILTIN_LED_TIP="点亮或关闭Arduino的板载LED",Blockly.Msg.ARD_COMPONENT_WARN1="必须添加具有相同 %2 名称的 %1 配置块才能使用此块！",Blockly.Msg.ARD_DEFINE="定义",Blockly.Msg.ARD_DIGITALREAD="读取数字引脚",Blockly.Msg.ARD_DIGITALREAD_TIP="读取引脚上的数字值：HIGH或LOW",Blockly.Msg.ARD_DIGITALWRITE="设置数字引脚",Blockly.Msg.ARD_DIGITALWRITE_TIP="将数字值HIGH或LOW写入特定端口",Blockly.Msg.ARD_FUN_RUN_LOOP="Arduino 主程序:",Blockly.Msg.ARD_FUN_RUN_SETUP="Arduino 初始化:",Blockly.Msg.ARD_FUN_RUN_TIP="定义 Arduino setup() and loop() 函数.",Blockly.Msg.ARD_HIGH="HIGH",Blockly.Msg.ARD_HIGHLOW_TIP="将引脚状态逻辑设置为高或低.",Blockly.Msg.ARD_LOW="LOW",Blockly.Msg.ARD_MAP="将",Blockly.Msg.ARD_MAP_TIP="将数字从[0-1024]重新映射到另一个.",Blockly.Msg.ARD_MAP_VAL="映射到 [0-",Blockly.Msg.ARD_NOTONE="关闭引脚的声音",Blockly.Msg.ARD_NOTONE_PIN="关闭引脚的声音",Blockly.Msg.ARD_NOTONE_PIN_TIP="停止在引脚上产生音调",Blockly.Msg.ARD_NOTONE_TIP="关闭所选引脚的音调",Blockly.Msg.ARD_PIN_WARN1=" %2 作为引脚 %3 需要引脚 %1 。 已经用作 %4 .",Blockly.Msg.ARD_PULSETIMEOUT_TIP="测量所选引脚上脉冲的持续时间，如果它在超时范围内，则以微秒为单位.",Blockly.Msg.ARD_PULSE_READ="测量引脚 %2 上的 %1 脉冲",Blockly.Msg.ARD_PULSE_READ_TIMEOUT="测量引脚 %2 上的 %1 脉冲（ %3 μs后超时）",Blockly.Msg.ARD_PULSE_TIP="测量所选引脚上脉冲的持续时间.",Blockly.Msg.ARD_SERIAL_BPS="bps",Blockly.Msg.ARD_SERIAL_PRINT="打印",Blockly.Msg.ARD_SERIAL_PRINT_NEWLINE="换行",Blockly.Msg.ARD_SERIAL_PRINT_TIP="将数据作为人类可读的ASCII文本打印到控制台/串行端口.",Blockly.Msg.ARD_SERIAL_PRINT_WARN="必须将 %1 的设置块添加到工作空间才能使用此块!",Blockly.Msg.ARD_SERIAL_SETUP="设置",Blockly.Msg.ARD_SERIAL_SETUP_TIP="选择特定串行外设的速度",Blockly.Msg.ARD_SERIAL_SPEED=":  波特率为",Blockly.Msg.ARD_SERVO_READ="读取引脚的舵机角度",Blockly.Msg.ARD_SERVO_READ_TIP="读取舵机角度",Blockly.Msg.ARD_SERVO_WRITE="设置引脚",Blockly.Msg.ARD_SERVO_WRITE_DEG_180="度(0~180)",Blockly.Msg.ARD_SERVO_WRITE_TIP="将舵机设置为指定角度",Blockly.Msg.ARD_SERVO_WRITE_TO="的舵机角度为",Blockly.Msg.ARD_SETTONE="设置引脚",Blockly.Msg.ARD_SPI_SETUP="设置",Blockly.Msg.ARD_SPI_SETUP_CONF="配置:",Blockly.Msg.ARD_SPI_SETUP_DIVIDE="时钟分频",Blockly.Msg.ARD_SPI_SETUP_LSBFIRST="低位先入",Blockly.Msg.ARD_SPI_SETUP_MODE="SPI 模式 (idle - edge)",Blockly.Msg.ARD_SPI_SETUP_MODE0="0 (低 - 下降沿)",Blockly.Msg.ARD_SPI_SETUP_MODE1="1 (低 - 上升沿)",Blockly.Msg.ARD_SPI_SETUP_MODE2="2 (高 - 下降沿)",Blockly.Msg.ARD_SPI_SETUP_MODE3="3 (高 - 上升沿)",Blockly.Msg.ARD_SPI_SETUP_MSBFIRST="高位先入",Blockly.Msg.ARD_SPI_SETUP_SHIFT="数据移位",Blockly.Msg.ARD_SPI_SETUP_TIP="配置SPI外设.",Blockly.Msg.ARD_SPI_TRANSRETURN_TIP="将SPI消息发送到指定的从设备并获取数据.",Blockly.Msg.ARD_SPI_TRANS_NONE="无",Blockly.Msg.ARD_SPI_TRANS_SLAVE="传输到引脚",Blockly.Msg.ARD_SPI_TRANS_TIP="将SPI消息发送到指定的从设备.",Blockly.Msg.ARD_SPI_TRANS_VAL="将",Blockly.Msg.ARD_SPI_TRANS_WARN1="必须将 %1 的设置块添加到工作空间才能使用此块!",Blockly.Msg.ARD_SPI_TRANS_WARN2="旧引脚值 %1 不再可用.",Blockly.Msg.ARD_STEPPER_COMPONENT="步进",Blockly.Msg.ARD_STEPPER_DEFAULT_NAME="MyStepper",Blockly.Msg.ARD_STEPPER_FOUR_PINS="4",Blockly.Msg.ARD_STEPPER_MOTOR="步进电机:",Blockly.Msg.ARD_STEPPER_NUMBER_OF_PINS="引脚数",Blockly.Msg.ARD_STEPPER_PIN1="引脚1#",Blockly.Msg.ARD_STEPPER_PIN2="引脚2#",Blockly.Msg.ARD_STEPPER_PIN3="引脚3#",Blockly.Msg.ARD_STEPPER_PIN4="引脚4#",Blockly.Msg.ARD_STEPPER_REVOLVS="每转步数",Blockly.Msg.ARD_STEPPER_SETUP="设置步进电机",Blockly.Msg.ARD_STEPPER_SETUP_TIP="配置步进电机引脚排列和其他设置.",Blockly.Msg.ARD_STEPPER_SPEED="设定速度(r/min)为",Blockly.Msg.ARD_STEPPER_STEP="移动步进电机",Blockly.Msg.ARD_STEPPER_STEPS="步",Blockly.Msg.ARD_STEPPER_STEP_TIP="将步进电机转动一定的步数.",Blockly.Msg.ARD_STEPPER_TWO_PINS="2",Blockly.Msg.ARD_TIME_DELAY="延时",Blockly.Msg.ARD_TIME_DELAY_MICROS="微秒",Blockly.Msg.ARD_TIME_DELAY_MICRO_TIP="等待特定时间，以微秒为单位",Blockly.Msg.ARD_TIME_DELAY_TIP="等待特定时间，以毫秒为单位",Blockly.Msg.ARD_TIME_INF="一直等待 (结束程序)",Blockly.Msg.ARD_TIME_INF_TIP="一直等待,停止程序.",Blockly.Msg.ARD_TIME_MICROS="当前已经过的时间 (微秒)",Blockly.Msg.ARD_TIME_MICROS_TIP="返回自Arduino开始运行当前程序以来的微秒数。 必须存储在正长整数中",Blockly.Msg.ARD_TIME_MILLIS="当前已经过的时间 (毫秒)",Blockly.Msg.ARD_TIME_MILLIS_TIP="返回自Arduino板开始运行当前程序以来的毫秒数。 必须存储在正长整数中",Blockly.Msg.ARD_TIME_MS="毫秒",Blockly.Msg.ARD_TONEFREQ="的音频频率为",Blockly.Msg.ARD_TONE_FREQ="频率",Blockly.Msg.ARD_TONE_PIN="Tone PIN#",Blockly.Msg.ARD_TONE_PIN_TIP="在引脚上生成音频音调",Blockly.Msg.ARD_TONE_TIP="将引脚上的音调设置为指定频率，范围为31 - 65535",Blockly.Msg.ARD_TONE_WARNING="频率必须在31 - 65535范围内",Blockly.Msg.ARD_TYPE_ARRAY="数组",Blockly.Msg.ARD_TYPE_BOOL="布尔",Blockly.Msg.ARD_TYPE_CHAR="字符",Blockly.Msg.ARD_TYPE_CHILDBLOCKMISSING="ChildBlockMissing",Blockly.Msg.ARD_TYPE_DECIMAL="浮点型",Blockly.Msg.ARD_TYPE_LONG="长整型",Blockly.Msg.ARD_TYPE_NULL="Null",Blockly.Msg.ARD_TYPE_NUMBER="整型",Blockly.Msg.ARD_TYPE_SHORT="短整型",Blockly.Msg.ARD_TYPE_TEXT="字符串",Blockly.Msg.ARD_TYPE_UNDEF="未定义",Blockly.Msg.ARD_VAR_AS="强制转换为",Blockly.Msg.ARD_VAR_AS_TIP="将值强制转换为特定类型",Blockly.Msg.ARD_WRITE_TO="为"},function(l,o,e){"use strict";Blockly.Arduino=new Blockly.Generator("Arduino"),Blockly.Arduino.StaticTyping=new Blockly.StaticTyping,Blockly.Arduino.addReservedWords("Blockly,setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,integer,constants,floating,point,void,boolean,char,unsigned,byte,int,word,long,float,double,string,String,array,static,volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts"),Blockly.Arduino.ORDER_ATOMIC=0,Blockly.Arduino.ORDER_UNARY_POSTFIX=1,Blockly.Arduino.ORDER_UNARY_PREFIX=2,Blockly.Arduino.ORDER_MULTIPLICATIVE=3,Blockly.Arduino.ORDER_ADDITIVE=4,Blockly.Arduino.ORDER_SHIFT=5,Blockly.Arduino.ORDER_RELATIONAL=6,Blockly.Arduino.ORDER_EQUALITY=7,Blockly.Arduino.ORDER_BITWISE_AND=8,Blockly.Arduino.ORDER_BITWISE_XOR=9,Blockly.Arduino.ORDER_BITWISE_OR=10,Blockly.Arduino.ORDER_LOGICAL_AND=11,Blockly.Arduino.ORDER_LOGICAL_OR=12,Blockly.Arduino.ORDER_CONDITIONAL=13,Blockly.Arduino.ORDER_ASSIGNMENT=14,Blockly.Arduino.ORDER_NONE=99,Blockly.Arduino.PinTypes={INPUT:"INPUT",OUTPUT:"OUTPUT",PWM:"PWM",SERVO:"SERVO",STEPPER:"STEPPER",SERIAL:"SERIAL",I2C:"I2C/TWI",SPI:"SPI"},Blockly.Arduino.DEF_FUNC_NAME=Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_,Blockly.Arduino.init=function(l){Blockly.Arduino.includes_=Object.create(null),Blockly.Arduino.definitions_=Object.create(null),Blockly.Arduino.variables_=Object.create(null),Blockly.Arduino.codeFunctions_=Object.create(null),Blockly.Arduino.userFunctions_=Object.create(null),Blockly.Arduino.functionNames_=Object.create(null),Blockly.Arduino.setups_=Object.create(null),Blockly.Arduino.pins_=Object.create(null),Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():Blockly.Arduino.variableDB_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);var o=Blockly.Arduino.StaticTyping.collectVarsWithTypes(l);for(var e in Blockly.Arduino.StaticTyping.setProcedureArgs(l,o),o)Blockly.Arduino.addVariable(e,Blockly.Arduino.getArduinoType_(o[e])+" "+Blockly.Arduino.variableDB_.getName(e,Blockly.Variables.NAME_TYPE)+";")},Blockly.Arduino.finish=function(l){var o,e=[],n=[],i=[],t=[];for(o in Blockly.Arduino.includes_)e.push(Blockly.Arduino.includes_[o]);for(o in e.length&&e.push("\n"),Blockly.Arduino.variables_)i.push(Blockly.Arduino.variables_[o]);for(o in i.length&&i.push("\n"),Blockly.Arduino.definitions_)n.push(Blockly.Arduino.definitions_[o]);for(o in n.length&&n.push("\n"),Blockly.Arduino.codeFunctions_)t.push(Blockly.Arduino.codeFunctions_[o]);for(o in Blockly.Arduino.userFunctions_)t.push(Blockly.Arduino.userFunctions_[o]);t.length&&t.push("\n");var r=[""],c="";for(o in void 0!==Blockly.Arduino.setups_.userSetupCode&&(c="\n"+Blockly.Arduino.setups_.userSetupCode,delete Blockly.Arduino.setups_.userSetupCode),Blockly.Arduino.setups_)r.push(Blockly.Arduino.setups_[o]);return c&&r.push(c),delete Blockly.Arduino.includes_,delete Blockly.Arduino.definitions_,delete Blockly.Arduino.codeFunctions_,delete Blockly.Arduino.userFunctions_,delete Blockly.Arduino.functionNames_,delete Blockly.Arduino.setups_,delete Blockly.Arduino.pins_,Blockly.Arduino.variableDB_.reset(),(e=e.join("\n")+i.join("\n")+n.join("\n")+t.join("\n\n"))+(r="void setup() {"+r.join("\n  ")+"\n}\n\n")+"void loop() {\n  "+l.replace(/\n/g,"\n  ")+"\n}"},Blockly.Arduino.addInclude=function(l,o){void 0===Blockly.Arduino.includes_[l]&&(Blockly.Arduino.includes_[l]=o)},Blockly.Arduino.addDeclaration=function(l,o){void 0===Blockly.Arduino.definitions_[l]&&(Blockly.Arduino.definitions_[l]=o)},Blockly.Arduino.addVariable=function(l,o,e){var n=!1;return(e||void 0===Blockly.Arduino.variables_[l])&&(Blockly.Arduino.variables_[l]=o,n=!0),n},Blockly.Arduino.addSetup=function(l,o,e){var n=!1;return(e||void 0===Blockly.Arduino.setups_[l])&&(Blockly.Arduino.setups_[l]=o,n=!0),n},Blockly.Arduino.addFunction=function(l,o){if(void 0===Blockly.Arduino.codeFunctions_[l]){var e=Blockly.Arduino.variableDB_.getDistinctName(l,Blockly.Generator.NAME_TYPE);Blockly.Arduino.codeFunctions_[l]=o.replace(Blockly.Arduino.DEF_FUNC_NAME,e),Blockly.Arduino.functionNames_[l]=e}return Blockly.Arduino.functionNames_[l]},Blockly.Arduino.reservePin=function(l,o,e,n){void 0!==Blockly.Arduino.pins_[o]?Blockly.Arduino.pins_[o]!=e?l.setWarningText(Blockly.Msg.ARD_PIN_WARN1.replace("%1",o).replace("%2",n).replace("%3",e).replace("%4",Blockly.Arduino.pins_[o]),n):l.setWarningText(null,n):(Blockly.Arduino.pins_[o]=e,l.setWarningText(null,n))},Blockly.Arduino.scrubNakedValue=function(l){return l+";\n"},Blockly.Arduino.quote_=function(l){return'"'+(l=l.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'"))+'"'},Blockly.Arduino.scrub_=function(l,o){if(null===o)return"";var e="";if(!l.outputConnection||!l.outputConnection.targetConnection){var n=l.getCommentText();n&&(e+=this.prefixLines(n,"// ")+"\n");for(var i=0;i<l.inputList.length;i++)l.inputList[i].type==Blockly.INPUT_VALUE&&(n=l.inputList[i].connection.targetBlock())&&(n=this.allNestedComments(n))&&(e+=this.prefixLines(n,"// "))}return i=l.nextConnection&&l.nextConnection.targetBlock(),e+o+this.blockToCode(i)},Blockly.Arduino.getArduinoType_=function(l){switch(l.typeId){case Blockly.Types.SHORT_NUMBER.typeId:return"char";case Blockly.Types.NUMBER.typeId:return"int";case Blockly.Types.LARGE_NUMBER.typeId:return"long";case Blockly.Types.DECIMAL.typeId:return"float";case Blockly.Types.TEXT.typeId:return"String";case Blockly.Types.CHARACTER.typeId:return"char";case Blockly.Types.BOOLEAN.typeId:return"boolean";case Blockly.Types.NULL.typeId:return"void";case Blockly.Types.UNDEF.typeId:return"undefined";case Blockly.Types.CHILD_BLOCK_MISSING.typeId:return"int";default:return"Invalid Blockly Type"}},Blockly.Arduino.noGeneratorCodeInline=function(){return["",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.noGeneratorCodeLine=function(){return""},Blockly.Arduino.Boards={},Blockly.Arduino.Boards.profiles={},Blockly.Arduino.Boards.profiles.uno={name:"Arduino Uno",description:"Arduino Uno standard compatible board",compilerFlag:"arduino:avr:uno",analogPins:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],digitalPins:[["0","0"],["1","1"],["2","2"],["3~","3"],["4","4"],["5~","5"],["6~","6"],["7","7"],["8","8"],["9","9"],["10~","10"],["11~","11"],["12","12"],["13","13"]],pwmPins:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],serial:[["serial","Serial"]],serialPins:{Serial:[["RX","0"],["TX","1"]]},serialSpeed:[["300","300"],["600","600"],["1200","1200"],["2400","2400"],["4800","4800"],["9600","9600"],["14400","14400"],["19200","19200"],["28800","28800"],["31250","31250"],["38400","38400"],["57600","57600"],["115200","115200"]],spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI","11"],["MISO","12"],["SCK","13"]]},spiClockDivide:[["2 (8MHz)","SPI_CLOCK_DIV2"],["4 (4MHz)","SPI_CLOCK_DIV4"],["8 (2MHz)","SPI_CLOCK_DIV8"],["16 (1MHz)","SPI_CLOCK_DIV16"],["32 (500KHz)","SPI_CLOCK_DIV32"],["64 (250KHz)","SPI_CLOCK_DIV64"],["128 (125KHz)","SPI_CLOCK_DIV128"]],i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","A4"],["SCL","A5"]]},i2cSpeed:[["100kHz","100000L"],["400kHz","400000L"]],builtinLed:[["BUILTIN_1","13"]],interrupt:[["interrupt0","2"],["interrupt1","3"]]},Blockly.Arduino.Boards.selected=Blockly.Arduino.Boards.profiles.uno,Blockly.Arduino.Boards.changeBoard=function(l,o){if(void 0===Blockly.Arduino.Boards.profiles[o])console.log("Tried to set non-existing Arduino board: "+o);else{Blockly.Arduino.Boards.selected=Blockly.Arduino.Boards.profiles[o];for(var e=l.getAllBlocks(),n=0;n<e.length;n++){var i=e[n].updateFields;i&&i.call(e[n])}}},Blockly.Arduino.Boards.refreshBlockFieldDropdown=function(l,o,e){var n=l.getField(o);o=n.getValue(),e=Blockly.Arduino.Boards.selected[e],n.menuGenerator_=e,n=!1;for(var i=0;i<e.length;i++)o==e[i][1]&&(n=!0);n?l.setWarningText(null,"bPin"):l.setWarningText("The old pin value "+o+" is no longer available.","bPin")},Blockly.Arduino.colour={},Blockly.Arduino.colour_picker=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.colour_random=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.colour_rgb=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.colour_blend=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.IO={},Blockly.Arduino.io_digitalwrite=function(l){var o=l.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(l,"STATE",Blockly.Arduino.ORDER_ATOMIC)||"LOW";return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.OUTPUT,"Digital Write"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", OUTPUT);",!1),"digitalWrite("+o+", "+e+");\n"},Blockly.Arduino.io_digitalread=function(l){var o=l.getFieldValue("PIN");return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.INPUT,"Digital Read"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", INPUT);",!1),["digitalRead("+o+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_builtin_led=function(l){var o=l.getFieldValue("BUILT_IN_LED"),e=Blockly.Arduino.valueToCode(l,"STATE",Blockly.Arduino.ORDER_ATOMIC)||"LOW";return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.OUTPUT,"Set LED"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", OUTPUT);",!1),"digitalWrite("+o+", "+e+");\n"},Blockly.Arduino.io_analogwrite=function(l){var o=l.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.OUTPUT,"Analogue Write"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", OUTPUT);",!1),0>e||255<e?l.setWarningText("The analogue value set must be between 0 and 255","pwm_value"):l.setWarningText(null,"pwm_value"),"analogWrite("+o+", "+e+");\n"},Blockly.Arduino.io_analogread=function(l){var o=l.getFieldValue("PIN");return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.INPUT,"Analogue Read"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", INPUT);",!1),["analogRead("+o+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_highlow=function(l){return[l.getFieldValue("STATE"),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_pulsein=function(l){var o=l.getFieldValue("PULSEPIN"),e=Blockly.Arduino.valueToCode(l,"PULSETYPE",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.INPUT,"Pulse Pin"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", INPUT);\n",!1),["pulseIn("+o+", "+e+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.io_pulsetimeout=function(l){var o=l.getFieldValue("PULSEPIN"),e=Blockly.Arduino.valueToCode(l,"PULSETYPE",Blockly.Arduino.ORDER_ATOMIC),n=Blockly.Arduino.valueToCode(l,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.INPUT,"Pulse Pin"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", INPUT);\n",!1),["pulseIn("+o+", "+e+", "+n+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.lists={},Blockly.Arduino.lists_create_empty=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_create_with=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_repeat=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_length=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_isEmpty=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_indexOf=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_getIndex=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.lists_setIndex=Blockly.Arduino.noGeneratorCodeLine,Blockly.Arduino.logic={},Blockly.Arduino.controls_if=function(l){var o=0,e=Blockly.Arduino.valueToCode(l,"IF"+o,Blockly.Arduino.ORDER_NONE)||"false",n=Blockly.Arduino.statementToCode(l,"DO"+o),i="if ("+e+") {\n"+n+"}";for(o=1;o<=l.elseifCount_;o++)i+=" else if ("+(e=Blockly.Arduino.valueToCode(l,"IF"+o,Blockly.Arduino.ORDER_NONE)||"false")+") {\n"+(n=Blockly.Arduino.statementToCode(l,"DO"+o))+"}";return l.elseCount_&&(i+=" else {\n"+(n=Blockly.Arduino.statementToCode(l,"ELSE"))+"}"),i+"\n"},Blockly.Arduino.logic_compare=function(l){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],e="=="==o||"!="==o?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL;return[(Blockly.Arduino.valueToCode(l,"A",e)||"0")+" "+o+" "+(l=Blockly.Arduino.valueToCode(l,"B",e)||"0"),e]},Blockly.Arduino.logic_operation=function(l){var o="AND"==l.getFieldValue("OP")?"&&":"||",e="&&"==o?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR,n=Blockly.Arduino.valueToCode(l,"A",e)||"false";if(l=Blockly.Arduino.valueToCode(l,"B",e)||"false",n||l){var i="&&"==o?"true":"false";n||(n=i),l||(l=i)}else l=n="false";return[n+" "+o+" "+l,e]},Blockly.Arduino.logic_negate=function(l){var o=Blockly.Arduino.ORDER_UNARY_PREFIX;return["!"+(Blockly.Arduino.valueToCode(l,"BOOL",o)||"false"),o]},Blockly.Arduino.logic_boolean=function(l){return["TRUE"==l.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.logic_null=function(l){return["NULL",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.logic_ternary=function(l){return[(Blockly.Arduino.valueToCode(l,"IF",Blockly.Arduino.ORDER_CONDITIONAL)||"false")+" ? "+(Blockly.Arduino.valueToCode(l,"THEN",Blockly.Arduino.ORDER_CONDITIONAL)||"null")+" : "+(l=Blockly.Arduino.valueToCode(l,"ELSE",Blockly.Arduino.ORDER_CONDITIONAL)||"null"),Blockly.Arduino.ORDER_CONDITIONAL]},Blockly.Arduino.loops={},Blockly.Arduino.controls_repeat=function(l){var o=Number(l.getFieldValue("TIMES")),e=Blockly.Arduino.statementToCode(l,"DO");return e=Blockly.Arduino.addLoopTrap(e,l.id),"for (int "+(l=Blockly.Arduino.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE))+" = 0; "+l+" < "+o+"; "+l+"++) {\n"+e+"}\n"},Blockly.Arduino.controls_repeat_ext=function(l){var o=Blockly.Arduino.valueToCode(l,"TIMES",Blockly.Arduino.ORDER_ADDITIVE)||"0",e=Blockly.Arduino.statementToCode(l,"DO");e=Blockly.Arduino.addLoopTrap(e,l.id),l="";var n=Blockly.Arduino.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),i=o;return o.match(/^\w+$/)||Blockly.isNumber(o)||(l+="int "+(i=Blockly.Arduino.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE))+" = "+o+";\n"),l+"for (int "+n+" = 0; "+n+" < "+i+"; "+n+"++) {\n"+e+"}\n"},Blockly.Arduino.controls_whileUntil=function(l){var o="UNTIL"==l.getFieldValue("MODE"),e=Blockly.Arduino.valueToCode(l,"BOOL",o?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_NONE)||"false",n=Blockly.Arduino.statementToCode(l,"DO");return n=Blockly.Arduino.addLoopTrap(n,l.id),o&&(e.match(/^\w+$/)||(e="("+e+")"),e="!"+e),"while ("+e+") {\n"+n+"}\n"},Blockly.Arduino.controls_for=function(l){var o=Blockly.Arduino.variableDB_.getName(l.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(l,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",n=Blockly.Arduino.valueToCode(l,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",i=Blockly.Arduino.valueToCode(l,"BY",Blockly.Arduino.ORDER_ASSIGNMENT)||"1",t=Blockly.Arduino.statementToCode(l,"DO");if(t=Blockly.Arduino.addLoopTrap(t,l.id),Blockly.isNumber(e)&&Blockly.isNumber(n)&&Blockly.isNumber(i)){var r=parseFloat(e)<=parseFloat(n);l="for ("+o+" = "+e+"; "+o+(r?" <= ":" >= ")+n+"; "+o,l=(1==(o=Math.abs(parseFloat(i)))?l+(r?"++":"--"):l+(r?" += ":" -= ")+o)+") {\n"+t+"}\n"}else l="",r=e,e.match(/^\w+$/)||Blockly.isNumber(e)||(l+="int "+(r=Blockly.Arduino.variableDB_.getDistinctName(o+"_start",Blockly.Variables.NAME_TYPE))+" = "+e+";\n"),e=n,n.match(/^\w+$/)||Blockly.isNumber(n)||(l+="int "+(e=Blockly.Arduino.variableDB_.getDistinctName(o+"_end",Blockly.Variables.NAME_TYPE))+" = "+n+";\n"),l+="int "+(n=Blockly.Arduino.variableDB_.getDistinctName(o+"_inc",Blockly.Variables.NAME_TYPE))+" = ",l=(l=Blockly.isNumber(i)?l+(Math.abs(i)+";\n"):l+"abs("+i+");\n")+"if ("+r+" > "+e+") {\n"+(Blockly.Arduino.INDENT+n)+" = -"+n+";\n",l+="}\n",l+="for ("+o+" = "+r+";\n     "+n+" >= 0 ? "+o+" <= "+e+" : "+o+" >= "+e+";\n     "+o+" += "+n+") {\n"+t+"}\n";return l},Blockly.Arduino.controls_forEach=Blockly.Arduino.noGeneratorCodeLine,Blockly.Arduino.controls_flow_statements=function(l){switch(l.getFieldValue("FLOW")){case"BREAK":return"break;\n";case"CONTINUE":return"continue;\n"}throw"Unknown flow statement."},Blockly.Arduino.map={},Blockly.Arduino.base_map=function(l){return["map("+(Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_NONE)||"0")+", 0, 1024, 0, "+(l=Blockly.Arduino.valueToCode(l,"DMAX",Blockly.Arduino.ORDER_ATOMIC)||"0")+")",Blockly.Arduino.ORDER_NONE]},Blockly.Arduino.math={},Blockly.Arduino.math_number=function(l){return 1/0==(l=parseFloat(l.getFieldValue("NUM")))?l="INFINITY":-1/0==l&&(l="-INFINITY"),[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.math_arithmetic=function(l){var o={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]}[l.getFieldValue("OP")],e=o[0];o=o[1];var n=Blockly.Arduino.valueToCode(l,"A",o)||"0";return l=Blockly.Arduino.valueToCode(l,"B",o)||"0",e?[n+e+l,o]:["Math.pow("+n+", "+l+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_single=function(l){var o=l.getFieldValue("OP");if("NEG"==o)return"-"==(l=Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"0")[0]&&(l=" "+l),["-"+l,Blockly.Arduino.ORDER_UNARY_PREFIX];switch(l="ABS"==o||"ROUND"==o.substring(0,5)?Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"0":"SIN"==o||"COS"==o||"TAN"==o?Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0":Blockly.Arduino.valueToCode(l,"NUM",Blockly.Arduino.ORDER_NONE)||"0",o){case"ABS":var e="abs("+l+")";break;case"ROOT":e="sqrt("+l+")";break;case"LN":e="log("+l+")";break;case"EXP":e="exp("+l+")";break;case"POW10":e="pow(10,"+l+")";break;case"ROUND":e="round("+l+")";break;case"ROUNDUP":e="ceil("+l+")";break;case"ROUNDDOWN":e="floor("+l+")";break;case"SIN":e="sin("+l+" / 180 * Math.PI)";break;case"COS":e="cos("+l+" / 180 * Math.PI)";break;case"TAN":e="tan("+l+" / 180 * Math.PI)"}if(e)return[e,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(o){case"LOG10":e="log("+l+") / log(10)";break;case"ASIN":e="asin("+l+") / M_PI * 180";break;case"ACOS":e="acos("+l+") / M_PI * 180";break;case"ATAN":e="atan("+l+") / M_PI * 180";break;default:throw"Unknown math operator: "+o}return[e,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Arduino.math_constant=function(l){return{PI:["M_PI",Blockly.Arduino.ORDER_UNARY_POSTFIX],E:["M_E",Blockly.Arduino.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",Blockly.Arduino.ORDER_MULTIPLICATIVE],SQRT2:["M_SQRT2",Blockly.Arduino.ORDER_UNARY_POSTFIX],SQRT1_2:["M_SQRT1_2",Blockly.Arduino.ORDER_UNARY_POSTFIX],INFINITY:["INFINITY",Blockly.Arduino.ORDER_ATOMIC]}[l.getFieldValue("CONSTANT")]},Blockly.Arduino.math_number_property=function(l){var o=Blockly.Arduino.valueToCode(l,"NUMBER_TO_CHECK",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0",e=l.getFieldValue("PROPERTY");if("PRIME"==e)return l=Blockly.Arduino.addFunction("mathIsPrime",["boolean "+Blockly.Arduino.DEF_FUNC_NAME+"(int n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1.\n  // And false if n is divisible by 2 or 3.\n  if (isnan(n) || (n <= 1) || (n == 1) || (n % 2 == 0) || (n % 3 == 0)) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (int x = 6; x <= sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n      return false;\n    }\n  }\n  return true;\n}"].join("\n")),Blockly.Arduino.addInclude("math","#include <math.h>"),[l+"("+o+")",Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(e){case"EVEN":var n=o+" % 2 == 0";break;case"ODD":n=o+" % 2 == 1";break;case"WHOLE":Blockly.Arduino.addInclude("math","#include <math.h>"),n="(floor("+o+") == "+o+")";break;case"POSITIVE":n=o+" > 0";break;case"NEGATIVE":n=o+" < 0";break;case"DIVISIBLE_BY":n=o+" % "+(l=Blockly.Arduino.valueToCode(l,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0")+" == 0"}return[n,Blockly.Arduino.ORDER_EQUALITY]},Blockly.Arduino.math_change=function(l){var o=Blockly.Arduino.valueToCode(l,"DELTA",Blockly.Arduino.ORDER_ADDITIVE)||"0";return Blockly.Arduino.variableDB_.getName(l.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" += "+o+";\n"},Blockly.Arduino.math_round=Blockly.Arduino.math_single,Blockly.Arduino.math_trig=Blockly.Arduino.math_single,Blockly.Arduino.math_on_list=Blockly.Arduino.noGeneratorCodeInline,Blockly.Arduino.math_modulo=function(l){return[(Blockly.Arduino.valueToCode(l,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0")+" % "+(l=Blockly.Arduino.valueToCode(l,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0"),Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Arduino.math_constrain=function(l){var o=Blockly.Arduino.valueToCode(l,"VALUE",Blockly.Arduino.ORDER_NONE)||"0",e=Blockly.Arduino.valueToCode(l,"LOW",Blockly.Arduino.ORDER_NONE)||"0";return["("+o+" < "+e+" ? "+e+" : ( "+o+" > "+(l=Blockly.Arduino.valueToCode(l,"HIGH",Blockly.Arduino.ORDER_NONE)||"0")+" ? "+l+" : "+o+"))",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_random_int=function(l){var o=Blockly.Arduino.valueToCode(l,"FROM",Blockly.Arduino.ORDER_NONE)||"0";l=Blockly.Arduino.valueToCode(l,"TO",Blockly.Arduino.ORDER_NONE)||"0";var e=Blockly.Arduino.variableDB_.getDistinctName("math_random_int",Blockly.Generator.NAME_TYPE);return Blockly.Arduino.math_random_int.random_function=e,[Blockly.Arduino.addFunction("mathRandomInt",["int "+Blockly.Arduino.DEF_FUNC_NAME+"(int min, int max) {","  if (min > max) {\n    // Swap min and max to ensure min is smaller.\n    int temp = min;\n    min = max;\n    max = temp;\n  }\n  return min + (rand() % (max - min + 1));\n}"].join("\n"))+"("+o+", "+l+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.math_random_float=function(l){return["(rand() / RAND_MAX)",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.procedures={},Blockly.Arduino.procedures_defreturn=function(l){var o=Blockly.Arduino.variableDB_.getName(l.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=Blockly.Arduino.statementToCode(l,"STACK");Blockly.Arduino.STATEMENT_PREFIX&&(e=Blockly.Arduino.prefixLines(Blockly.Arduino.STATEMENT_PREFIX.replace(/%1/g,"'"+l.id+"'"),Blockly.Arduino.INDENT)+e),Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+l.id+"'")+e);var n=Blockly.Arduino.valueToCode(l,"RETURN",Blockly.Arduino.ORDER_NONE)||"";n&&(n="  return "+n+";\n");for(var i=[],t=0;t<l.arguments_.length;t++)i[t]=Blockly.Arduino.getArduinoType_(l.getArgType(l.arguments_[t]))+" "+Blockly.Arduino.variableDB_.getName(l.arguments_[t],Blockly.Variables.NAME_TYPE);return t=Blockly.Types.NULL,l.getReturnType&&(t=l.getReturnType()),e=(t=Blockly.Arduino.getArduinoType_(t))+" "+o+"("+i.join(", ")+") {\n"+e+n+"}",e=Blockly.Arduino.scrub_(l,e),Blockly.Arduino.userFunctions_[o]=e,null},Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn,Blockly.Arduino.procedures_callreturn=function(l){for(var o=Blockly.Arduino.variableDB_.getName(l.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],n=0;n<l.arguments_.length;n++)e[n]=Blockly.Arduino.valueToCode(l,"ARG"+n,Blockly.Arduino.ORDER_NONE)||"null";return[o+"("+e.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.procedures_callnoreturn=function(l){for(var o=Blockly.Arduino.variableDB_.getName(l.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],n=0;n<l.arguments_.length;n++)e[n]=Blockly.Arduino.valueToCode(l,"ARG"+n,Blockly.Arduino.ORDER_NONE)||"null";return o+"("+e.join(", ")+");\n"},Blockly.Arduino.procedures_ifreturn=function(l){var o="if ("+(Blockly.Arduino.valueToCode(l,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+") {\n";return l.hasReturnValue_?o+="  return "+(l=Blockly.Arduino.valueToCode(l,"VALUE",Blockly.Arduino.ORDER_NONE)||"null")+";\n":o+="  return;\n",o+"}\n"},Blockly.Arduino.arduino_functions=function(l){var o=Blockly.Arduino.statementToCode(l,"SETUP_FUNC");if(o&&Blockly.Arduino.addSetup("userSetupCode",o,!0),l=l.getInputTargetBlock("LOOP_FUNC"),"string"!=typeof(o=Blockly.Arduino.blockToCode(l)))throw'Expecting code from statement block "'+l.type+'".';return o},Blockly.Arduino.arduino_setup=function(l){(l=Blockly.Arduino.statementToCode(l,"SETUP_FUNC"))&&Blockly.Arduino.addSetup("userSetupCode",l,!0)},Blockly.Arduino.serial={},Blockly.Arduino.serial_print=function(l){for(var o=l.getFieldValue("SERIAL_ID"),e=Blockly.Arduino.valueToCode(l,"CONTENT",Blockly.Arduino.ORDER_ATOMIC)||"0",n="TRUE"==l.getFieldValue("NEW_LINE"),i=Blockly.Arduino.Boards.selected.serialPins[o],t=0;t<i.length;t++)Blockly.Arduino.reservePin(l,i[t][1],Blockly.Arduino.PinTypes.SERIAL,"SERIAL "+i[t][0]);return n?o+".println("+e+");\n":o+".print("+e+");\n"},Blockly.Arduino.serial_setup=function(l){var o=l.getFieldValue("SERIAL_ID");return l=l.getFieldValue("SPEED"),Blockly.Arduino.addSetup("serial_"+o,o+".begin("+l+");",!0),""},Blockly.Arduino.servo={},Blockly.Arduino.servo_write=function(l){var o=l.getFieldValue("SERVO_PIN"),e=Blockly.Arduino.valueToCode(l,"SERVO_ANGLE",Blockly.Arduino.ORDER_ATOMIC)||"90",n="myServo"+o;return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.SERVO,"Servo Write"),Blockly.Arduino.addInclude("servo","#include <Servo.h>"),Blockly.Arduino.addDeclaration("servo_"+o,"Servo "+n+";"),Blockly.Arduino.addSetup("servo_"+o,n+".attach("+o+");",!0),n+".write("+e+");\n"},Blockly.Arduino.servo_read=function(l){var o=l.getFieldValue("SERVO_PIN"),e="myServo"+o;return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.SERVO,"Servo Read"),Blockly.Arduino.addInclude("servo","#include <Servo.h>"),Blockly.Arduino.addDeclaration("servo_"+o,"Servo "+e+";"),Blockly.Arduino.addSetup("servo_"+o,e+".attach("+o+");",!0),[e+".read()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.spi={},Blockly.Arduino.spi_setup=function(l){var o=l.getFieldValue("SPI_ID"),e=l.getFieldValue("SPI_SHIFT_ORDER"),n=l.getFieldValue("SPI_CLOCK_DIVIDE");return l=l.getFieldValue("SPI_MODE"),Blockly.Arduino.addInclude("spi","#include <SPI.h>"),Blockly.Arduino.addSetup("spi_order",o+".setBitOrder("+e+");",!0),Blockly.Arduino.addSetup("spi_mode",o+".setDataMode("+l+");",!0),Blockly.Arduino.addSetup("spi_div",o+".setClockDivider("+n+");",!0),Blockly.Arduino.addSetup("spi_begin",o+".begin();",!0),""},Blockly.Arduino.spi_transfer=function(l){var o=l.getFieldValue("SPI_ID"),e=l.getFieldValue("SPI_SS"),n=Blockly.Arduino.valueToCode(l,"SPI_DATA",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.addInclude("spi","#include <SPI.h>"),Blockly.Arduino.addSetup("spi_begin",o+".begin();",!1);for(var i=Blockly.Arduino.Boards.selected.spiPins[o],t=0;t<i.length;t++)Blockly.Arduino.reservePin(l,i[t][1],Blockly.Arduino.PinTypes.SPI,"SPI "+i[t][0]);return"none"!==e&&(Blockly.Arduino.reservePin(l,e,Blockly.Arduino.PinTypes.OUTPUT,"SPI Slave pin"),Blockly.Arduino.addSetup("io_"+e,"pinMode("+e+", OUTPUT);",!1)),l=[],"none"!==e&&l.push("digitalWrite("+e+", HIGH);"),l.push(o+".transfer("+n+");"),"none"!==e&&l.push("digitalWrite("+e+", LOW);"),l.join("\n")+"\n"},Blockly.Arduino.spi_transfer_return=function(l){var o=l.getFieldValue("SPI_ID"),e=l.getFieldValue("SPI_SS"),n=Blockly.Arduino.valueToCode(l,"SPI_DATA",Blockly.Arduino.ORDER_ATOMIC)||"0";return Blockly.Arduino.spi_transfer(l),["none"===e?o+".transfer("+n+")":Blockly.Arduino.addFunction("spiReturnSlave"+e,["int "+Blockly.Arduino.DEF_FUNC_NAME+"() {","  int spiReturn = 0;","  digitalWrite("+e+", HIGH);","  spiReturn = "+o+".transfer("+n+");","  digitalWrite("+e+", LOW);","  return spiReturn;\n}"].join("\n"))+"()",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.stepper={},Blockly.Arduino.stepper_config=function(l){var o=Blockly.Arduino.PinTypes.STEPPER,e=l.getFieldValue("STEPPER_NAME"),n=l.getFieldValue("STEPPER_NUMBER_OF_PINS"),i=Blockly.Arduino.valueToCode(l,"STEPPER_STEPS",Blockly.Arduino.ORDER_ATOMIC)||"360",t=Blockly.Arduino.valueToCode(l,"STEPPER_SPEED",Blockly.Arduino.ORDER_ATOMIC)||"90",r=[l.getFieldValue("STEPPER_PIN1"),l.getFieldValue("STEPPER_PIN2")];"FOUR"===n&&(r.push(l.getFieldValue("STEPPER_PIN3")),r.push(l.getFieldValue("STEPPER_PIN4"))),n="int "+e+"["+r.length+"] = {",i="Stepper stepper_"+e+"("+i+", ";for(var c=0;c<r.length;c++)Blockly.Arduino.reservePin(l,r[c],o,"Stepper"),n+=r[c]+", ",i+=r[c]+", ";return n=n.slice(0,-2)+"};",i=i.slice(0,-2)+");",Blockly.Arduino.addVariable(e,n,!0),e="stepper_"+e,Blockly.Arduino.addInclude("stepper","#include <Stepper.h>"),Blockly.Arduino.addDeclaration(e,i),Blockly.Arduino.addSetup(e,e+".setSpeed("+t+");",!0),""},Blockly.Arduino.stepper_step=function(l){return"stepper_"+l.getFieldValue("STEPPER_NAME")+".step("+(l=Blockly.Arduino.valueToCode(l,"STEPPER_STEPS",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.text={},Blockly.Arduino.text=function(l){return[Blockly.Arduino.quote_(l.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.text_join=function(l){if(0==l.itemCount_)return['""',Blockly.Arduino.ORDER_ATOMIC];if(1==l.itemCount_)return["String("+(Blockly.Arduino.valueToCode(l,"ADD0",Blockly.Arduino.ORDER_UNARY_POSTFIX)||'""')+")",Blockly.Arduino.ORDER_UNARY_POSTFIX];for(var o=[],e=0;e<l.itemCount_;e++){var n=Blockly.Arduino.valueToCode(l,"ADD"+e,Blockly.Arduino.ORDER_NONE);o[e]=""==n?'""':"String("+n+")"}return[o=o.join(" + "),Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_append=function(l){return Blockly.Arduino.variableDB_.getName(l.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" += "+(""==(l=Blockly.Arduino.valueToCode(l,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX))?'""':"String("+l+")")+";\n"},Blockly.Arduino.text_length=function(l){return["String("+(Blockly.Arduino.valueToCode(l,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||'""')+").length()",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_isEmpty=function(l){var o=[];return o.push("boolean "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {"),o.push("  if (msg.length() == 0) {"),o.push("    return true;"),o.push("  } else {"),o.push("    return false;"),o.push("  }"),o.push("}"),[(o=Blockly.Arduino.addFunction("isStringEmpty",o.join("\n")))+"("+(""==(l=Blockly.Arduino.valueToCode(l,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX))?'""':"String("+l+")")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_trim=function(l){Blockly.Arduino.text_trim.OPERATORS={LEFT:".trim()",RIGHT:".trim()",BOTH:".trim()"};var o=l.getFieldValue("MODE");return o=Blockly.Arduino.text_trim.OPERATORS[o],[(""==(l=Blockly.Arduino.valueToCode(l,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX))?'""':"String("+l+")")+o,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_print=function(l){var o=Blockly.Arduino.Boards.selected.serial[0][1];return Blockly.Arduino.addSetup("serial_"+o,o+".begin(9600);",!1),o+".print("+(""==(l=Blockly.Arduino.valueToCode(l,"TEXT",Blockly.Arduino.ORDER_NONE))?'""':"String("+l+")")+");\n"},Blockly.Arduino.text_prompt_ext=function(l){var o=Blockly.Arduino.Boards.selected.serial[0][1],e=l.getFieldValue("TYPE"),n=[],i=e==Blockly.Types.NUMBER.output;return i?n.push("int "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {"):n.push("String "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {"),n.push("  "+o+".println(msg);"),n.push("  boolean stringComplete = false;"),i?n.push("  int content = 0;"):n.push('  String content = "";'),n.push("  while (stringComplete == false) {"),n.push("    if ("+o+".available()) {"),i?(n.push("      content = "+o+".parseInt();"),n.push("      stringComplete = true;")):(n.push("      char readChar = (char)"+o+".read();"),n.push("      if (readChar == '\\n' || readChar == '\\r') {"),n.push("        stringComplete = true;"),n.push("      } else {"),n.push("        content += readChar;"),n.push("      }")),n.push("    }"),n.push("  }"),n.push("  // Empty incoming serial buffer"),n.push("  while(Serial.available()) { Serial.read(); };"),n.push("  return content;"),n.push("}"),e=Blockly.Arduino.addFunction("getUserInputPrompt"+e,n.join("\n")),Blockly.Arduino.addSetup("serial_"+o,o+".begin(9600);",!1),[e+"("+(l=Blockly.Arduino.valueToCode(l,"TEXT",Blockly.Arduino.ORDER_NONE)||'""')+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_endString=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_indexOf=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_charAt=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_getSubstring=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_changeCase=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.text_prompt=function(l){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Arduino.time={},Blockly.Arduino.time_delay=function(l){return"delay("+(Blockly.Arduino.valueToCode(l,"DELAY_TIME_MILI",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.time_delaymicros=function(l){return"delayMicroseconds("+(Blockly.Arduino.valueToCode(l,"DELAY_TIME_MICRO",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"},Blockly.Arduino.time_millis=function(l){return["millis()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.time_micros=function(l){return["micros()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.infinite_loop=function(l){return"while(true);\n"},Blockly.Arduino.tone={},Blockly.Arduino.io_tone=function(l){var o=l.getFieldValue("TONEPIN"),e=Blockly.Arduino.valueToCode(l,"FREQUENCY",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.OUTPUT,"Tone Pin"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", OUTPUT);\n",!1),"tone("+o+","+e+");\n"},Blockly.Arduino.io_notone=function(l){var o=l.getFieldValue("TONEPIN");return Blockly.Arduino.reservePin(l,o,Blockly.Arduino.PinTypes.OUTPUT,"Tone Pin"),Blockly.Arduino.addSetup("io_"+o,"pinMode("+o+", OUTPUT);\n",!1),"noTone("+o+");\n"},Blockly.Arduino.variables={},Blockly.Arduino.variables_get=function(l){return[Blockly.Arduino.variableDB_.getName(l.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Arduino.variables_set=function(l){var o=Blockly.Arduino.valueToCode(l,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(l.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+o+";\n"},Blockly.Arduino.variables_set_type=function(l){var o=Blockly.Arduino.valueToCode(l,"VARIABLE_SETTYPE_INPUT",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return["("+Blockly.Arduino.getArduinoType_(Blockly.Types[l.getFieldValue("VARIABLE_SETTYPE_TYPE")])+")("+o+")",Blockly.Arduino.ORDER_ATOMIC]}},function(l,o,e){"use strict";Blockly.Blocks.io={},Blockly.Blocks.io.HUE="#D400D4",Blockly.Blocks.io_digitalwrite={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/DigitalWrite"),this.setColour(Blockly.Blocks.io.HUE),this.appendValueInput("STATE").appendField(Blockly.Msg.ARD_DIGITALWRITE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"PIN").appendField(Blockly.Msg.ARD_WRITE_TO).setCheck(Blockly.Types.BOOLEAN.checkList),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_DIGITALWRITE_TIP)},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"PIN","digitalPins")}},Blockly.Blocks.io_digitalread={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/DigitalRead"),this.setColour(Blockly.Blocks.io.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_DIGITALREAD).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"PIN"),this.setOutput(!0,Blockly.Types.BOOLEAN.output),this.setTooltip(Blockly.Msg.ARD_DIGITALREAD_TIP)},getBlockType:function(){return Blockly.Types.BOOLEAN},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"PIN","digitalPins")}},Blockly.Blocks.io_builtin_led={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/DigitalWrite"),this.setColour(Blockly.Blocks.io.HUE),this.appendValueInput("STATE").appendField(Blockly.Msg.ARD_BUILTIN_LED).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.builtinLed),"BUILT_IN_LED").appendField(Blockly.Msg.ARD_WRITE_TO).setCheck(Blockly.Types.BOOLEAN.checkList),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_BUILTIN_LED_TIP)},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"BUILT_IN_LED","builtinLed")},getBlockType:function(){return Blockly.Types.BOOLEAN}},Blockly.Blocks.io_analogwrite={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/AnalogWrite"),this.setColour(Blockly.Blocks.io.HUE),this.appendValueInput("NUM").appendField(Blockly.Msg.ARD_ANALOGWRITE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.pwmPins),"PIN").appendField(Blockly.Msg.ARD_WRITE_TO).setCheck(Blockly.Types.NUMBER.output),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_ANALOGWRITE_TIP)},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"PIN","pwmPins")},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.io_analogread={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/AnalogRead"),this.setColour(Blockly.Blocks.io.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_ANALOGREAD).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.analogPins),"PIN"),this.setOutput(!0,Blockly.Types.NUMBER.output),this.setTooltip(Blockly.Msg.ARD_ANALOGREAD_TIP)},getBlockType:function(){return Blockly.Types.NUMBER},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"PIN","analogPins")}},Blockly.Blocks.io_highlow={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/Constants"),this.setColour(Blockly.Blocks.io.HUE),this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Blockly.Msg.ARD_HIGH,"HIGH"],[Blockly.Msg.ARD_LOW,"LOW"]]),"STATE"),this.setOutput(!0,Blockly.Types.BOOLEAN.output),this.setTooltip(Blockly.Msg.ARD_HIGHLOW_TIP)},getBlockType:function(){return Blockly.Types.BOOLEAN}},Blockly.Blocks.io_pulsein={init:function(){this.jsonInit({type:"math_foo",message0:Blockly.Msg.ARD_PULSE_READ,args0:[{type:"input_value",name:"PULSETYPE",check:Blockly.Types.BOOLEAN.check},{type:"field_dropdown",name:"PULSEPIN",options:Blockly.Arduino.Boards.selected.digitalPins}],output:Blockly.Types.NUMBER.output,inputsInline:!0,colour:Blockly.Blocks.io.HUE,tooltip:Blockly.Msg.ARD_PULSE_TIP,helpUrl:"https://www.arduino.cc/en/Reference/PulseIn"})},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.io_pulsetimeout={init:function(){this.jsonInit({type:"math_foo",message0:Blockly.Msg.ARD_PULSE_READ_TIMEOUT,args0:[{type:"input_value",name:"PULSETYPE",check:Blockly.Types.BOOLEAN.check},{type:"field_dropdown",name:"PULSEPIN",options:Blockly.Arduino.Boards.selected.digitalPins},{type:"input_value",name:"TIMEOUT",check:Blockly.Types.NUMBER.check}],output:Blockly.Types.NUMBER.output,inputsInline:!0,colour:Blockly.Blocks.io.HUE,tooltip:Blockly.Msg.ARD_PULSETIMEOUT_TIP,helpUrl:"https://www.arduino.cc/en/Reference/PulseIn"})},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.logo={},Blockly.Blocks.logo.HUE=180,Blockly.Blocks.ardublockly_name_top={init:function(){this.appendDummyInput().appendField("Ardublockly"),this.setPreviousStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_name_bottom={init:function(){this.appendDummyInput().appendField("Ardublockly"),this.setNextStatement(!0),this.setColour(Blockly.Blocks.logo.HUE),this.setTooltip("")}},Blockly.Blocks.ardublockly_plus_top_large={init:function(){this.appendValueInput("NAME").appendField("     +"),this.setNextStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_plus_top_small={init:function(){this.appendValueInput("NAME").appendField("  +"),this.setNextStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_plus_bottom_large={init:function(){this.appendValueInput("NAME").appendField("     +"),this.setPreviousStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_plus_bottom_small={init:function(){this.appendValueInput("NAME").appendField("  +"),this.setPreviousStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_plus_both_small={init:function(){this.appendValueInput("NAME").appendField("  +"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_plus_both_large={init:function(){this.appendValueInput("NAME").appendField("     +"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_minus_large={init:function(){this.appendDummyInput().appendField("-     "),this.setInputsInline(!1),this.setOutput(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.ardublockly_minus_small={init:function(){this.appendDummyInput().appendField("-  "),this.setInputsInline(!1),this.setOutput(!0),this.setColour(Blockly.Blocks.logo.HUE)}},Blockly.Blocks.map={},Blockly.Blocks.map.HUE="#9400D3",Blockly.Blocks.base_map={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/map"),this.setColour(Blockly.Blocks.map.HUE),this.appendValueInput("NUM").appendField(Blockly.Msg.ARD_MAP).setCheck(Blockly.Types.NUMBER.checkList),this.appendValueInput("DMAX").appendField(Blockly.Msg.ARD_MAP_VAL).setCheck(Blockly.Types.NUMBER.checkList),this.appendDummyInput().appendField("]"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(Blockly.Msg.ARD_MAP_TIP)},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.procedures.HUE="#3455DB",Blockly.Blocks.arduino_functions={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_FUN_RUN_SETUP),this.appendStatementInput("SETUP_FUNC"),this.appendDummyInput().appendField(Blockly.Msg.ARD_FUN_RUN_LOOP),this.appendStatementInput("LOOP_FUNC"),this.setInputsInline(!1),this.setColour(Blockly.Blocks.procedures.HUE),this.setTooltip(Blockly.Msg.ARD_FUN_RUN_TIP),this.setHelpUrl("https://arduino.cc/en/Reference/Loop"),this.contextMenu=!1},getArduinoLoopsInstance:function(){return!0}},Blockly.Blocks.arduino_setup={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_FUN_RUN_SETUP),this.appendStatementInput("SETUP_FUNC"),this.setInputsInline(!1),this.setColour(Blockly.Blocks.procedures.HUE),this.setTooltip(Blockly.Msg.ARD_FUN_RUN_TIP),this.setHelpUrl("https://arduino.cc/en/Reference/Loop"),this.contextMenu=!1},getArduinoLoopsInstance:function(){return!0}},Blockly.Blocks.serial={},Blockly.Blocks.serial.HUE="#002050",Blockly.Blocks.serial_setup={init:function(){this.setHelpUrl("http://arduino.cc/en/Serial/Begin"),this.setColour(Blockly.Blocks.serial.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_SERIAL_SETUP).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.serial),"SERIAL_ID").appendField(Blockly.Msg.ARD_SERIAL_SPEED).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.serialSpeed),"SPEED").appendField(Blockly.Msg.ARD_SERIAL_BPS),this.setInputsInline(!0),this.setTooltip(Blockly.Msg.ARD_SERIAL_SETUP_TIP)},getSerialSetupInstance:function(){return this.getFieldValue("SERIAL_ID")},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SERIAL_ID","serial"),Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SPEED","serialSpeed")}},Blockly.Blocks.serial_print={init:function(){this.setHelpUrl("http://www.arduino.cc/en/Serial/Print"),this.setColour(Blockly.Blocks.serial.HUE),this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.serial),"SERIAL_ID").appendField(Blockly.Msg.ARD_SERIAL_PRINT),this.appendValueInput("CONTENT"),this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"NEW_LINE").appendField(Blockly.Msg.ARD_SERIAL_PRINT_NEWLINE),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_SERIAL_PRINT_TIP)},onchange:function(l){if(this.workspace&&l.type!=Blockly.Events.MOVE&&l.type!=Blockly.Events.UI){l=this.getFieldValue("SERIAL_ID");for(var o=Blockly.mainWorkspace.getTopBlocks(),e=!1,n=0;n<o.length;n++){var i=o[n].getSerialSetupInstance;if(i&&l==(i=i.call(o[n]))){e=!0;break}}e?this.setWarningText(null,"serial_setup"):this.setWarningText(Blockly.Msg.ARD_SERIAL_PRINT_WARN.replace("%1",l),"serial_setup")}},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SERIAL_ID","serial")}},Blockly.Blocks.servo={},Blockly.Blocks.servo.HUE=60,Blockly.Blocks.servo_write={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/ServoWrite"),this.setColour(Blockly.Blocks.servo.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_SERVO_WRITE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"SERVO_PIN"),this.setInputsInline(!1),this.appendValueInput("SERVO_ANGLE").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_SERVO_WRITE_TO),this.appendDummyInput().appendField(Blockly.Msg.ARD_SERVO_WRITE_DEG_180),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_SERVO_WRITE_TIP)},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SERVO_PIN","digitalPins")}},Blockly.Blocks.servo_read={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/ServoRead"),this.setColour(Blockly.Blocks.servo.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_SERVO_READ).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"SERVO_PIN"),this.setOutput(!0,Blockly.Types.NUMBER.output),this.setTooltip(Blockly.Msg.ARD_SERVO_READ_TIP)},getBlockType:function(){return Blockly.Types.NUMBER},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SERVO_PIN","digitalPins")}},Blockly.Blocks.spi={},Blockly.Blocks.spi.HUE="#002050",Blockly.Blocks.spi_setup={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/SPI"),this.setColour(Blockly.Blocks.spi.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_SETUP).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.spi),"SPI_ID").appendField(Blockly.Msg.ARD_SPI_SETUP_CONF),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_SETUP_SHIFT).appendField(new Blockly.FieldDropdown([[Blockly.Msg.ARD_SPI_SETUP_MSBFIRST,"MSBFIRST"],[Blockly.Msg.ARD_SPI_SETUP_LSBFIRST,"LSBFIRST"]]),"SPI_SHIFT_ORDER"),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_SETUP_DIVIDE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.spiClockDivide),"SPI_CLOCK_DIVIDE"),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_SETUP_MODE).appendField(new Blockly.FieldDropdown([[Blockly.Msg.ARD_SPI_SETUP_MODE0,"SPI_MODE0"],[Blockly.Msg.ARD_SPI_SETUP_MODE1,"SPI_MODE1"],[Blockly.Msg.ARD_SPI_SETUP_MODE2,"SPI_MODE2"],[Blockly.Msg.ARD_SPI_SETUP_MODE3,"SPI_MODE3"]]),"SPI_MODE"),this.setTooltip(Blockly.Msg.ARD_SPI_SETUP_TIP)},getSpiSetupInstance:function(){return this.getFieldValue("SPI_ID")},updateFields:function(){Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SPI_ID","spi"),Blockly.Arduino.Boards.refreshBlockFieldDropdown(this,"SPI_CLOCK_DIVIDE","spiClockDivide")}},Blockly.Blocks.spi_transfer={init:function(){var l=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]].concat(Blockly.Arduino.Boards.selected.digitalPins);this.setHelpUrl("http://arduino.cc/en/Reference/SPITransfer"),this.setColour(Blockly.Blocks.spi.HUE),this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.spi),"SPI_ID"),this.appendValueInput("SPI_DATA").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_SPI_TRANS_VAL),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_TRANS_SLAVE).appendField(new Blockly.FieldDropdown(l),"SPI_SS"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_SPI_TRANS_TIP)},onchange:function(l){if(this.workspace&&l.type!=Blockly.Events.MOVE&&l.type!=Blockly.Events.UI){l=this.getFieldValue("SPI_ID");for(var o=Blockly.mainWorkspace.getTopBlocks(),e=!1,n=0,i=o.length;n<i;n++){var t=o[n].getSpiSetupInstance;t&&l==(t=t.call(o[n]))&&(e=!0)}e?this.setWarningText(null,"spi_setup"):this.setWarningText(Blockly.Msg.ARD_SPI_TRANS_WARN1.replace("%1",l),"spi_setup")}},getBlockType:function(){return Blockly.Types.NUMBER},updateFields:function(){var l=this.getField("SPI_SS"),o=l.getValue();l.menuGenerator_=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]].concat(Blockly.Arduino.Boards.selected.digitalPins);for(var e=!1,n=0,i=l.menuGenerator_.length;n<i;n++)o==l.menuGenerator_[n][1]&&(e=!0);e?this.setWarningText(null,"bPin"):this.setWarningText(Blockly.Msg.ARD_SPI_TRANS_WARN2.replace("%1",o),"bPin")}},Blockly.Blocks.spi_transfer_return={init:function(){var l=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]].concat(Blockly.Arduino.Boards.selected.digitalPins);this.setHelpUrl("http://arduino.cc/en/Reference/SPITransfer"),this.setColour(Blockly.Blocks.spi.HUE),this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.spi),"SPI_ID"),this.appendValueInput("SPI_DATA").appendField(Blockly.Msg.ARD_SPI_TRANS_VAL),this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_TRANS_SLAVE).appendField(new Blockly.FieldDropdown(l),"SPI_SS"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(Blockly.Msg.ARD_SPI_TRANSRETURN_TIP)},onchange:Blockly.Blocks.spi_transfer.onchange,getBlockType:Blockly.Blocks.spi_transfer.getBlockType,updateFields:Blockly.Blocks.spi_transfer.updateFields},Blockly.Blocks.stepper={},Blockly.Blocks.stepper.HUE=80,Blockly.Blocks.stepper_config={init:function(){var l=new Blockly.FieldDropdown([[Blockly.Msg.ARD_STEPPER_TWO_PINS,"TWO"],[Blockly.Msg.ARD_STEPPER_FOUR_PINS,"FOUR"]],function(l){this.sourceBlock_.updateShape_("FOUR"==l)});this.setHelpUrl("http://arduino.cc/en/Reference/StepperConstructor"),this.setColour(Blockly.Blocks.stepper.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_STEPPER_SETUP).appendField(new Blockly.FieldInstance("Stepper",Blockly.Msg.ARD_STEPPER_DEFAULT_NAME,!0,!0,!1),"STEPPER_NAME").appendField(Blockly.Msg.ARD_STEPPER_MOTOR),this.appendDummyInput("PINS_DROPDOWN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.ARD_STEPPER_NUMBER_OF_PINS).appendField(l,"STEPPER_NUMBER_OF_PINS"),this.appendDummyInput("PINS").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.ARD_STEPPER_PIN1).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"STEPPER_PIN1").appendField(Blockly.Msg.ARD_STEPPER_PIN2).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"STEPPER_PIN2"),this.appendValueInput("STEPPER_STEPS").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.ARD_STEPPER_REVOLVS),this.appendValueInput("STEPPER_SPEED").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.ARD_STEPPER_SPEED),this.setTooltip(Blockly.Msg.ARD_STEPPER_SETUP_TIP)},domToMutation:function(l){l="FOUR"==l.getAttribute("number_of_pins"),this.updateShape_(l)},mutationToDom:function(){var l=document.createElement("mutation"),o=this.getFieldValue("STEPPER_NUMBER_OF_PINS");return l.setAttribute("number_of_pins",o),l},updateShape_:function(l){var o=this.getFieldValue("STEPPER_PIN3");l?o||this.getInput("PINS").appendField(Blockly.Msg.ARD_STEPPER_PIN3,"PIN3").appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"STEPPER_PIN3").appendField(Blockly.Msg.ARD_STEPPER_PIN4,"PIN4").appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"STEPPER_PIN4"):o&&(this.getInput("PINS").removeField("STEPPER_PIN3"),this.getInput("PINS").removeField("PIN3"),this.getInput("PINS").removeField("STEPPER_PIN4"),this.getInput("PINS").removeField("PIN4"))},updateFields:function(){Blockly.Boards.refreshBlockFieldDropdown(this,"STEPPER_PIN1","digitalPins"),Blockly.Boards.refreshBlockFieldDropdown(this,"STEPPER_PIN2","digitalPins"),Blockly.Boards.refreshBlockFieldDropdown(this,"STEPPER_PIN3","digitalPins"),Blockly.Boards.refreshBlockFieldDropdown(this,"STEPPER_PIN4","digitalPins")}},Blockly.Blocks.stepper_step={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/StepperStep"),this.setColour(Blockly.Blocks.stepper.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_STEPPER_STEP).appendField(new Blockly.FieldInstance("Stepper",Blockly.Msg.ARD_STEPPER_DEFAULT_NAME,!1,!0,!1),"STEPPER_NAME"),this.appendValueInput("STEPPER_STEPS").setCheck(Blockly.Types.NUMBER.checkList),this.appendDummyInput().appendField(Blockly.Msg.ARD_STEPPER_STEPS),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.ARD_STEPPER_STEP_TIP)},onchange:function(l){this.workspace&&l.type!=Blockly.Events.MOVE&&l.type!=Blockly.Events.UI&&(l=this.getFieldValue("STEPPER_NAME"),Blockly.Instances.isInstancePresent(l,"Stepper",this)?this.setWarningText(null):this.setWarningText(Blockly.Msg.ARD_COMPONENT_WARN1.replace("%1",Blockly.Msg.ARD_STEPPER_COMPONENT).replace("%2",l)))}},Blockly.Blocks.time={},Blockly.Blocks.time.HUE="#1E90FF",Blockly.Blocks.time_delay={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/Delay"),this.setColour(Blockly.Blocks.time.HUE),this.appendValueInput("DELAY_TIME_MILI").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TIME_DELAY),this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MS),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_TIME_DELAY_TIP)}},Blockly.Blocks.time_delaymicros={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/DelayMicroseconds"),this.setColour(Blockly.Blocks.time.HUE),this.appendValueInput("DELAY_TIME_MICRO").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TIME_DELAY),this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_DELAY_MICROS),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Blockly.Msg.ARD_TIME_DELAY_MICRO_TIP)}},Blockly.Blocks.time_millis={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/Millis"),this.setColour(Blockly.Blocks.time.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MILLIS),this.setOutput(!0,Blockly.Types.LARGE_NUMBER.output),this.setTooltip(Blockly.Msg.ARD_TIME_MILLIS_TIP)},getBlockType:function(){return Blockly.Types.LARGE_NUMBER}},Blockly.Blocks.time_micros={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/Micros"),this.setColour(Blockly.Blocks.time.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MICROS),this.setOutput(!0,Blockly.Types.LARGE_NUMBER.output),this.setTooltip(Blockly.Msg.ARD_TIME_MICROS_TIP)},getBlockType:function(){return Blockly.Types.LARGE_NUMBER}},Blockly.Blocks.infinite_loop={init:function(){this.setHelpUrl(""),this.setColour(Blockly.Blocks.time.HUE),this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_INF),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setTooltip(Blockly.Msg.ARD_TIME_INF_TIP)}},Blockly.Blocks.tone={},Blockly.Blocks.tone.HUE=250,Blockly.Blocks.io_tone={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_SETTONE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"TONEPIN"),this.appendValueInput("FREQUENCY").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TONEFREQ),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Blocks.tone.HUE),this.setTooltip(Blockly.Msg.ARD_TONE_TIP),this.setHelpUrl("https://www.arduino.cc/en/Reference/tone")},onchange:function(l){this.workspace&&l.type!=Blockly.Events.MOVE&&l.type!=Blockly.Events.UI&&(31>(l=Blockly.Arduino.valueToCode(this,"FREQUENCY",Blockly.Arduino.ORDER_ATOMIC))||65535<l?this.setWarningText(Blockly.Msg.ARD_TONE_WARNING,"io_tone"):this.setWarningText(null,"io_tone"))},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.io_notone={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_NOTONE).appendField(new Blockly.FieldDropdown(Blockly.Arduino.Boards.selected.digitalPins),"TONEPIN"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Blocks.tone.HUE),this.setTooltip(Blockly.Msg.ARD_NOTONE_TIP),this.setHelpUrl("https://www.arduino.cc/en/Reference/noTone")},getBlockType:function(){return Blockly.Types.NUMBER}},Blockly.Blocks.variables.HUE="#DC143C",Blockly.Blocks.variables_set_type={init:function(){this.setHelpUrl("http://arduino.cc/en/Reference/HomePage"),this.setColour(Blockly.Blocks.variables.HUE),this.appendValueInput("VARIABLE_SETTYPE_INPUT"),this.appendDummyInput().appendField(Blockly.Msg.ARD_VAR_AS).appendField(new Blockly.FieldDropdown(Blockly.Types.getValidTypeArray()),"VARIABLE_SETTYPE_TYPE"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(Blockly.Msg.ARD_VAR_AS_TIP)},getBlockType:function(){var l=this.getFieldValue("VARIABLE_SETTYPE_TYPE");return Blockly.Types[l]}}}]));